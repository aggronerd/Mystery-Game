<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Procedural Game Plot Generation Prototype: source/dlib/pixel.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    </ul>
  </div>
<h1>source/dlib/pixel.h</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// Copyright (C) 2006  Davis E. King (davis@dlib.net)</span>
<a name="l00002"></a>00002 <span class="comment">// License: Boost Software License   See LICENSE.txt for the full license.</span>
<a name="l00003"></a>00003 <span class="preprocessor">#ifndef DLIB_PIXEl_ </span>
<a name="l00004"></a>00004 <span class="preprocessor"></span><span class="preprocessor">#define DLIB_PIXEl_</span>
<a name="l00005"></a>00005 <span class="preprocessor"></span>
<a name="l00006"></a>00006 <span class="preprocessor">#include &lt;iostream&gt;</span>
<a name="l00007"></a>00007 <span class="preprocessor">#include &quot;serialize.h&quot;</span>
<a name="l00008"></a>00008 <span class="preprocessor">#include &lt;cmath&gt;</span>
<a name="l00009"></a>00009 <span class="preprocessor">#include &quot;algs.h&quot;</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include &quot;uintn.h&quot;</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include &lt;limits&gt;</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include &quot;enable_if.h&quot;</span>
<a name="l00013"></a>00013 
<a name="l00014"></a>00014 <span class="keyword">namespace </span>dlib
<a name="l00015"></a>00015 {
<a name="l00016"></a>00016 
<a name="l00017"></a>00017 <span class="comment">// ----------------------------------------------------------------------------------------</span>
<a name="l00018"></a>00018 
<a name="l00024"></a>00024 <span class="comment">// ----------------------------------------------------------------------------------------</span>
<a name="l00025"></a>00025 
<a name="l00026"></a>00026     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00027"></a>00027     <span class="keyword">struct </span>pixel_traits;
<a name="l00079"></a>00079 <span class="comment">// ----------------------------------------------------------------------------------------</span>
<a name="l00080"></a>00080 
<a name="l00081"></a><a class="code" href="structdlib_1_1rgb__pixel.html">00081</a>     <span class="keyword">struct </span><a class="code" href="structdlib_1_1rgb__pixel.html">rgb_pixel</a>
<a name="l00082"></a>00082     {
<a name="l00088"></a><a class="code" href="structdlib_1_1rgb__pixel.html#afa497c6467591efaeef930a7a629e704">00088</a>         <a class="code" href="structdlib_1_1rgb__pixel.html#afa497c6467591efaeef930a7a629e704">rgb_pixel</a> (
<a name="l00089"></a>00089         ) {}
<a name="l00090"></a>00090 
<a name="l00091"></a>00091         <a class="code" href="structdlib_1_1rgb__pixel.html#afa497c6467591efaeef930a7a629e704">rgb_pixel</a> (
<a name="l00092"></a>00092             <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> red_,
<a name="l00093"></a>00093             <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> green_,
<a name="l00094"></a>00094             <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> blue_
<a name="l00095"></a>00095         ) : red(red_), green(green_), blue(blue_) {}
<a name="l00096"></a>00096 
<a name="l00097"></a>00097         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> red;
<a name="l00098"></a>00098         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> green;
<a name="l00099"></a>00099         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> blue;
<a name="l00100"></a>00100     };
<a name="l00101"></a>00101 
<a name="l00102"></a>00102 <span class="comment">// ----------------------------------------------------------------------------------------</span>
<a name="l00103"></a>00103 
<a name="l00104"></a><a class="code" href="structdlib_1_1bgr__pixel.html">00104</a>     <span class="keyword">struct </span><a class="code" href="structdlib_1_1bgr__pixel.html">bgr_pixel</a>
<a name="l00105"></a>00105     {
<a name="l00114"></a><a class="code" href="structdlib_1_1bgr__pixel.html#a525b55be99d6be3a3a14d7b111f68708">00114</a>         <a class="code" href="structdlib_1_1bgr__pixel.html#a525b55be99d6be3a3a14d7b111f68708">bgr_pixel</a> (
<a name="l00115"></a>00115         ) {}
<a name="l00116"></a>00116 
<a name="l00117"></a>00117         <a class="code" href="structdlib_1_1bgr__pixel.html#a525b55be99d6be3a3a14d7b111f68708">bgr_pixel</a> (
<a name="l00118"></a>00118             <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> blue_,
<a name="l00119"></a>00119             <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> green_,
<a name="l00120"></a>00120             <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> red_
<a name="l00121"></a>00121         ) : blue(blue_), green(green_), red(red_) {}
<a name="l00122"></a>00122 
<a name="l00123"></a>00123         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> blue;
<a name="l00124"></a>00124         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> green;
<a name="l00125"></a>00125         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> red;
<a name="l00126"></a>00126     };
<a name="l00127"></a>00127 
<a name="l00128"></a>00128 <span class="comment">// ----------------------------------------------------------------------------------------</span>
<a name="l00129"></a>00129 
<a name="l00130"></a><a class="code" href="structdlib_1_1rgb__alpha__pixel.html">00130</a>     <span class="keyword">struct </span><a class="code" href="structdlib_1_1rgb__alpha__pixel.html">rgb_alpha_pixel</a>
<a name="l00131"></a>00131     {
<a name="l00138"></a><a class="code" href="structdlib_1_1rgb__alpha__pixel.html#a3214ab60e949914276ca302c0a67d519">00138</a>         <a class="code" href="structdlib_1_1rgb__alpha__pixel.html#a3214ab60e949914276ca302c0a67d519">rgb_alpha_pixel</a> (
<a name="l00139"></a>00139         ) {}
<a name="l00140"></a>00140 
<a name="l00141"></a>00141         <a class="code" href="structdlib_1_1rgb__alpha__pixel.html#a3214ab60e949914276ca302c0a67d519">rgb_alpha_pixel</a> (
<a name="l00142"></a>00142             <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> red_,
<a name="l00143"></a>00143             <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> green_,
<a name="l00144"></a>00144             <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> blue_,
<a name="l00145"></a>00145             <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> alpha_
<a name="l00146"></a>00146         ) : red(red_), green(green_), blue(blue_), alpha(alpha_) {}
<a name="l00147"></a>00147 
<a name="l00148"></a>00148         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> red;
<a name="l00149"></a>00149         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> green;
<a name="l00150"></a>00150         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> blue;
<a name="l00151"></a>00151         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> alpha;
<a name="l00152"></a>00152     };
<a name="l00153"></a>00153 
<a name="l00154"></a>00154 <span class="comment">// ----------------------------------------------------------------------------------------</span>
<a name="l00155"></a>00155 
<a name="l00156"></a><a class="code" href="structdlib_1_1hsi__pixel.html">00156</a>     <span class="keyword">struct </span><a class="code" href="structdlib_1_1hsi__pixel.html">hsi_pixel</a>
<a name="l00157"></a>00157     {
<a name="l00163"></a><a class="code" href="structdlib_1_1hsi__pixel.html#a0c0e3a9cdcb8467326a256b897e1bd24">00163</a>         <a class="code" href="structdlib_1_1hsi__pixel.html#a0c0e3a9cdcb8467326a256b897e1bd24">hsi_pixel</a> (
<a name="l00164"></a>00164         ) {}
<a name="l00165"></a>00165 
<a name="l00166"></a>00166         <a class="code" href="structdlib_1_1hsi__pixel.html#a0c0e3a9cdcb8467326a256b897e1bd24">hsi_pixel</a> (
<a name="l00167"></a>00167             <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> h_,
<a name="l00168"></a>00168             <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> s_,
<a name="l00169"></a>00169             <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> i_
<a name="l00170"></a>00170         ) : h(h_), s(s_), i(i_) {}
<a name="l00171"></a>00171 
<a name="l00172"></a>00172         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> h;
<a name="l00173"></a>00173         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> s;
<a name="l00174"></a>00174         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> i;
<a name="l00175"></a>00175     };
<a name="l00176"></a>00176 
<a name="l00177"></a>00177 <span class="comment">// ----------------------------------------------------------------------------------------</span>
<a name="l00178"></a>00178 
<a name="l00179"></a>00179     <span class="keyword">template</span> &lt;
<a name="l00180"></a>00180         <span class="keyword">typename</span> P1,
<a name="l00181"></a>00181         <span class="keyword">typename</span> P2  
<a name="l00182"></a>00182         &gt;
<a name="l00183"></a>00183     <span class="keyword">inline</span> <span class="keywordtype">void</span> assign_pixel (
<a name="l00184"></a>00184         P1&amp; dest,
<a name="l00185"></a>00185         <span class="keyword">const</span> P2&amp; src
<a name="l00186"></a>00186     );
<a name="l00208"></a>00208     <span class="keyword">template</span> &lt;
<a name="l00209"></a>00209         <span class="keyword">typename</span> P
<a name="l00210"></a>00210         &gt;
<a name="l00211"></a>00211     <span class="keyword">inline</span> <span class="keywordtype">void</span> assign_pixel (
<a name="l00212"></a>00212         P&amp; dest,
<a name="l00213"></a>00213         <span class="keyword">const</span> <span class="keywordtype">int</span> src
<a name="l00214"></a>00214     );
<a name="l00222"></a>00222     <span class="keyword">template</span> &lt;
<a name="l00223"></a>00223         <span class="keyword">typename</span> P
<a name="l00224"></a>00224         &gt;
<a name="l00225"></a>00225     <span class="keyword">inline</span> <span class="keywordtype">void</span> assign_pixel (
<a name="l00226"></a>00226         P&amp; dest,
<a name="l00227"></a>00227         <span class="keyword">const</span> <span class="keywordtype">long</span> src
<a name="l00228"></a>00228     );
<a name="l00236"></a>00236 <span class="comment">// ----------------------------------------------------------------------------------------</span>
<a name="l00237"></a>00237 
<a name="l00238"></a>00238     <span class="keyword">template</span> &lt;
<a name="l00239"></a>00239         <span class="keyword">typename</span> P
<a name="l00240"></a>00240         &gt;
<a name="l00241"></a>00241     <span class="keyword">inline</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="namespacedlib.html#acadbad5cd1cbaf9f188eb56b518a0f01">get_pixel_intensity</a> (
<a name="l00242"></a>00242         <span class="keyword">const</span> P&amp; src
<a name="l00243"></a>00243     );
<a name="l00254"></a>00254 <span class="comment">// ----------------------------------------------------------------------------------------</span>
<a name="l00255"></a>00255 
<a name="l00256"></a>00256     <span class="keyword">template</span> &lt;
<a name="l00257"></a>00257         <span class="keyword">typename</span> P
<a name="l00258"></a>00258         &gt;
<a name="l00259"></a>00259     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacedlib.html#a3b9a3281788e2c68adbe5e81265aaeb2">assign_pixel_intensity</a> (
<a name="l00260"></a>00260         P&amp; dest,
<a name="l00261"></a>00261         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> new_intensity
<a name="l00262"></a>00262     );
<a name="l00273"></a>00273 <span class="comment">// ----------------------------------------------------------------------------------------</span>
<a name="l00274"></a>00274 
<a name="l00275"></a>00275     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacedlib.html#ac78b72e65600a0d25ac3224539794fc2">serialize</a> (
<a name="l00276"></a>00276         <span class="keyword">const</span> rgb_pixel&amp; item, 
<a name="l00277"></a>00277         std::ostream&amp; out 
<a name="l00278"></a>00278     );   
<a name="l00283"></a>00283 <span class="comment">// ----------------------------------------------------------------------------------------</span>
<a name="l00284"></a>00284 
<a name="l00285"></a>00285     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacedlib.html#a5e5ead1e1179ca255a628e46a55d12ce">deserialize</a> (
<a name="l00286"></a>00286         rgb_pixel&amp; item, 
<a name="l00287"></a>00287         std::istream&amp; in
<a name="l00288"></a>00288     );   
<a name="l00293"></a>00293 <span class="comment">// ----------------------------------------------------------------------------------------</span>
<a name="l00294"></a>00294 
<a name="l00295"></a>00295     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacedlib.html#ac78b72e65600a0d25ac3224539794fc2">serialize</a> (
<a name="l00296"></a>00296         <span class="keyword">const</span> bgr_pixel&amp; item, 
<a name="l00297"></a>00297         std::ostream&amp; out 
<a name="l00298"></a>00298     );   
<a name="l00303"></a>00303 <span class="comment">// ----------------------------------------------------------------------------------------</span>
<a name="l00304"></a>00304 
<a name="l00305"></a>00305     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacedlib.html#a5e5ead1e1179ca255a628e46a55d12ce">deserialize</a> (
<a name="l00306"></a>00306         bgr_pixel&amp; item, 
<a name="l00307"></a>00307         std::istream&amp; in
<a name="l00308"></a>00308     );   
<a name="l00313"></a>00313 <span class="comment">// ----------------------------------------------------------------------------------------</span>
<a name="l00314"></a>00314 
<a name="l00315"></a>00315     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacedlib.html#ac78b72e65600a0d25ac3224539794fc2">serialize</a> (
<a name="l00316"></a>00316         <span class="keyword">const</span> rgb_alpha_pixel&amp; item, 
<a name="l00317"></a>00317         std::ostream&amp; out 
<a name="l00318"></a>00318     );   
<a name="l00323"></a>00323 <span class="comment">// ----------------------------------------------------------------------------------------</span>
<a name="l00324"></a>00324 
<a name="l00325"></a>00325     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacedlib.html#a5e5ead1e1179ca255a628e46a55d12ce">deserialize</a> (
<a name="l00326"></a>00326         rgb_alpha_pixel&amp; item, 
<a name="l00327"></a>00327         std::istream&amp; in
<a name="l00328"></a>00328     );   
<a name="l00333"></a>00333 <span class="comment">// ----------------------------------------------------------------------------------------</span>
<a name="l00334"></a>00334 
<a name="l00335"></a>00335     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacedlib.html#ac78b72e65600a0d25ac3224539794fc2">serialize</a> (
<a name="l00336"></a>00336         <span class="keyword">const</span> hsi_pixel&amp; item, 
<a name="l00337"></a>00337         std::ostream&amp; out 
<a name="l00338"></a>00338     );   
<a name="l00343"></a>00343 <span class="comment">// ----------------------------------------------------------------------------------------</span>
<a name="l00344"></a>00344 
<a name="l00345"></a>00345     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacedlib.html#a5e5ead1e1179ca255a628e46a55d12ce">deserialize</a> (
<a name="l00346"></a>00346         hsi_pixel&amp; item, 
<a name="l00347"></a>00347         std::istream&amp; in
<a name="l00348"></a>00348     );   
<a name="l00353"></a>00353 <span class="comment">// ----------------------------------------------------------------------------------------</span>
<a name="l00354"></a>00354 
<a name="l00355"></a>00355     <span class="keyword">template</span> &lt;&gt;
<a name="l00356"></a><a class="code" href="structdlib_1_1pixel__traits_3_01rgb__pixel_01_4.html">00356</a>     <span class="keyword">struct </span>pixel_traits&lt;<a class="code" href="structdlib_1_1rgb__pixel.html">rgb_pixel</a>&gt;
<a name="l00357"></a>00357     {
<a name="l00358"></a>00358         <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> rgb  = <span class="keyword">true</span>;
<a name="l00359"></a>00359         <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> rgb_alpha  = <span class="keyword">false</span>;
<a name="l00360"></a>00360         <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> grayscale = <span class="keyword">false</span>;
<a name="l00361"></a>00361         <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> hsi = <span class="keyword">false</span>;
<a name="l00362"></a>00362         <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">long</span> num = 3;
<a name="l00363"></a>00363         <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> max() { <span class="keywordflow">return</span> 255;}
<a name="l00364"></a>00364         <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> has_alpha = <span class="keyword">false</span>;
<a name="l00365"></a>00365     };
<a name="l00366"></a>00366 
<a name="l00367"></a>00367 <span class="comment">// ----------------------------------------------------------------------------------------</span>
<a name="l00368"></a>00368     
<a name="l00369"></a>00369     <span class="keyword">template</span> &lt;&gt;
<a name="l00370"></a><a class="code" href="structdlib_1_1pixel__traits_3_01bgr__pixel_01_4.html">00370</a>     <span class="keyword">struct </span>pixel_traits&lt;<a class="code" href="structdlib_1_1bgr__pixel.html">bgr_pixel</a>&gt;
<a name="l00371"></a>00371     {
<a name="l00372"></a>00372         <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> rgb  = <span class="keyword">true</span>;
<a name="l00373"></a>00373         <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> rgb_alpha  = <span class="keyword">false</span>;
<a name="l00374"></a>00374         <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> grayscale = <span class="keyword">false</span>;
<a name="l00375"></a>00375         <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> hsi = <span class="keyword">false</span>;
<a name="l00376"></a>00376         <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">long</span> num = 3;
<a name="l00377"></a>00377         <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> max() { <span class="keywordflow">return</span> 255;}
<a name="l00378"></a>00378         <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> has_alpha = <span class="keyword">false</span>;
<a name="l00379"></a>00379     };
<a name="l00380"></a>00380 
<a name="l00381"></a>00381 <span class="comment">// ----------------------------------------------------------------------------------------</span>
<a name="l00382"></a>00382     
<a name="l00383"></a>00383     <span class="keyword">template</span> &lt;&gt;
<a name="l00384"></a><a class="code" href="structdlib_1_1pixel__traits_3_01rgb__alpha__pixel_01_4.html">00384</a>     <span class="keyword">struct </span>pixel_traits&lt;<a class="code" href="structdlib_1_1rgb__alpha__pixel.html">rgb_alpha_pixel</a>&gt;
<a name="l00385"></a>00385     {
<a name="l00386"></a>00386         <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> rgb  = <span class="keyword">false</span>;
<a name="l00387"></a>00387         <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> rgb_alpha  = <span class="keyword">true</span>;
<a name="l00388"></a>00388         <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> grayscale = <span class="keyword">false</span>;
<a name="l00389"></a>00389         <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> hsi = <span class="keyword">false</span>;
<a name="l00390"></a>00390         <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">long</span> num = 4;
<a name="l00391"></a>00391         <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> max() { <span class="keywordflow">return</span> 255; }
<a name="l00392"></a>00392         <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> has_alpha = <span class="keyword">true</span>;
<a name="l00393"></a>00393     };
<a name="l00394"></a>00394 
<a name="l00395"></a>00395 <span class="comment">// ----------------------------------------------------------------------------------------</span>
<a name="l00396"></a>00396 
<a name="l00397"></a>00397 
<a name="l00398"></a>00398     <span class="keyword">template</span> &lt;&gt;
<a name="l00399"></a><a class="code" href="structdlib_1_1pixel__traits_3_01hsi__pixel_01_4.html">00399</a>     <span class="keyword">struct </span>pixel_traits&lt;<a class="code" href="structdlib_1_1hsi__pixel.html">hsi_pixel</a>&gt;
<a name="l00400"></a>00400     {
<a name="l00401"></a>00401         <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> rgb  = <span class="keyword">false</span>;
<a name="l00402"></a>00402         <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> rgb_alpha  = <span class="keyword">false</span>;
<a name="l00403"></a>00403         <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> grayscale = <span class="keyword">false</span>;
<a name="l00404"></a>00404         <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> hsi = <span class="keyword">true</span>;
<a name="l00405"></a>00405         <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">long</span> num = 3;
<a name="l00406"></a>00406         <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> max() { <span class="keywordflow">return</span> 255;}
<a name="l00407"></a>00407         <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> has_alpha = <span class="keyword">false</span>;
<a name="l00408"></a>00408     };
<a name="l00409"></a>00409 
<a name="l00410"></a>00410 <span class="comment">// ----------------------------------------------------------------------------------------</span>
<a name="l00411"></a>00411 
<a name="l00412"></a>00412     <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;
<a name="l00413"></a><a class="code" href="structdlib_1_1grayscale__pixel__traits.html">00413</a>     <span class="keyword">struct </span><a class="code" href="structdlib_1_1grayscale__pixel__traits.html">grayscale_pixel_traits</a>
<a name="l00414"></a>00414     {
<a name="l00415"></a>00415         <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> rgb  = <span class="keyword">false</span>;
<a name="l00416"></a>00416         <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> rgb_alpha  = <span class="keyword">false</span>;
<a name="l00417"></a>00417         <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> grayscale = <span class="keyword">true</span>;
<a name="l00418"></a>00418         <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> hsi = <span class="keyword">false</span>;
<a name="l00419"></a>00419         <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">long</span> num = 1;
<a name="l00420"></a>00420         <span class="keyword">const</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> has_alpha = <span class="keyword">false</span>;
<a name="l00421"></a>00421         <span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> max() { <span class="keywordflow">return</span> std::numeric_limits&lt;T&gt;::max();}
<a name="l00422"></a>00422     };
<a name="l00423"></a>00423 
<a name="l00424"></a><a class="code" href="structdlib_1_1pixel__traits_3_01unsigned_01char_01_4.html">00424</a>     <span class="keyword">template</span> &lt;&gt; <span class="keyword">struct </span>pixel_traits&lt;unsigned char&gt;  : <span class="keyword">public</span> <a class="code" href="structdlib_1_1grayscale__pixel__traits.html">grayscale_pixel_traits</a>&lt;unsigned char&gt; {};
<a name="l00425"></a><a class="code" href="structdlib_1_1pixel__traits_3_01unsigned_01short_01_4.html">00425</a>     <span class="keyword">template</span> &lt;&gt; <span class="keyword">struct </span>pixel_traits&lt;unsigned short&gt; : <span class="keyword">public</span> <a class="code" href="structdlib_1_1grayscale__pixel__traits.html">grayscale_pixel_traits</a>&lt;unsigned short&gt; {};
<a name="l00426"></a><a class="code" href="structdlib_1_1pixel__traits_3_01unsigned_01int_01_4.html">00426</a>     <span class="keyword">template</span> &lt;&gt; <span class="keyword">struct </span>pixel_traits&lt;unsigned int&gt; : <span class="keyword">public</span> <a class="code" href="structdlib_1_1grayscale__pixel__traits.html">grayscale_pixel_traits</a>&lt;unsigned int&gt; {};
<a name="l00427"></a><a class="code" href="structdlib_1_1pixel__traits_3_01unsigned_01long_01_4.html">00427</a>     <span class="keyword">template</span> &lt;&gt; <span class="keyword">struct </span>pixel_traits&lt;unsigned long&gt; : <span class="keyword">public</span> <a class="code" href="structdlib_1_1grayscale__pixel__traits.html">grayscale_pixel_traits</a>&lt;unsigned long&gt; {};
<a name="l00428"></a>00428 
<a name="l00429"></a>00429 <span class="comment">// ----------------------------------------------------------------------------------------</span>
<a name="l00430"></a>00430 
<a name="l00431"></a>00431     <span class="comment">// The following is a bunch of conversion stuff for the assign_pixel function.</span>
<a name="l00432"></a>00432 
<a name="l00433"></a>00433     <span class="keyword">namespace </span>assign_pixel_helpers
<a name="l00434"></a>00434     {
<a name="l00435"></a>00435         <span class="keyword">enum</span>
<a name="l00436"></a>00436         {
<a name="l00437"></a>00437             grayscale = 1,
<a name="l00438"></a>00438             rgb,
<a name="l00439"></a>00439             hsi,
<a name="l00440"></a>00440             rgb_alpha
<a name="l00441"></a>00441         };
<a name="l00442"></a>00442 
<a name="l00443"></a>00443         <span class="keyword">template</span> &lt;
<a name="l00444"></a>00444             <span class="keyword">typename</span> P1,
<a name="l00445"></a>00445             <span class="keyword">typename</span> P2,
<a name="l00446"></a>00446             <span class="keywordtype">int</span> p1_type = static_switch&lt;
<a name="l00447"></a>00447                 pixel_traits&lt;P1&gt;::grayscale,
<a name="l00448"></a>00448                 pixel_traits&lt;P1&gt;::rgb,
<a name="l00449"></a>00449                 pixel_traits&lt;P1&gt;::hsi,  
<a name="l00450"></a>00450                 pixel_traits&lt;P1&gt;::rgb_alpha &gt;::value,
<a name="l00451"></a>00451             <span class="keywordtype">int</span> p2_type = static_switch&lt;
<a name="l00452"></a>00452                 pixel_traits&lt;P2&gt;::grayscale,
<a name="l00453"></a>00453                 pixel_traits&lt;P2&gt;::rgb,
<a name="l00454"></a>00454                 pixel_traits&lt;P2&gt;::hsi,
<a name="l00455"></a>00455                 pixel_traits&lt;P2&gt;::rgb_alpha  &gt;::value
<a name="l00456"></a>00456             &gt;
<a name="l00457"></a>00457         <span class="keyword">struct </span>helper;
<a name="l00458"></a>00458 
<a name="l00459"></a>00459     <span class="comment">// -----------------------------</span>
<a name="l00460"></a>00460         <span class="comment">// all the same kind </span>
<a name="l00461"></a>00461 
<a name="l00462"></a>00462         <span class="keyword">template</span> &lt; <span class="keyword">typename</span> P &gt;
<a name="l00463"></a><a class="code" href="structdlib_1_1assign__pixel__helpers_1_1helper_3_01P_00_01P_00_01grayscale_00_01grayscale_01_4.html">00463</a>         <span class="keyword">struct </span>helper&lt;P,P,grayscale,grayscale&gt;
<a name="l00464"></a>00464         {
<a name="l00465"></a>00465             <span class="keyword">static</span> <span class="keywordtype">void</span> assign(P&amp; dest, <span class="keyword">const</span> P&amp; src) 
<a name="l00466"></a>00466             { 
<a name="l00467"></a>00467                 dest = src;
<a name="l00468"></a>00468             }
<a name="l00469"></a>00469         };
<a name="l00470"></a>00470 
<a name="l00471"></a>00471         <span class="keyword">template</span> &lt; <span class="keyword">typename</span> P1, <span class="keyword">typename</span> P2 &gt;
<a name="l00472"></a><a class="code" href="structdlib_1_1assign__pixel__helpers_1_1helper_3_01P1_00_01P2_00_01grayscale_00_01grayscale_01_4.html">00472</a>         <span class="keyword">struct </span>helper&lt;P1,P2,grayscale,grayscale&gt;
<a name="l00473"></a>00473         {
<a name="l00474"></a>00474             <span class="keyword">static</span> <span class="keywordtype">void</span> assign(P1&amp; dest, <span class="keyword">const</span> P2&amp; src) 
<a name="l00475"></a>00475             { 
<a name="l00476"></a>00476                 <span class="keywordflow">if</span> (src &lt;= pixel_traits&lt;P1&gt;::max())
<a name="l00477"></a>00477                     dest = <span class="keyword">static_cast&lt;</span>P1<span class="keyword">&gt;</span>(src);
<a name="l00478"></a>00478                 <span class="keywordflow">else</span>
<a name="l00479"></a>00479                     dest = <span class="keyword">static_cast&lt;</span>P1<span class="keyword">&gt;</span>(pixel_traits&lt;P1&gt;::max());
<a name="l00480"></a>00480             }
<a name="l00481"></a>00481         };
<a name="l00482"></a>00482 
<a name="l00483"></a>00483         <span class="keyword">template</span> &lt; <span class="keyword">typename</span> P1, <span class="keyword">typename</span> P2 &gt;
<a name="l00484"></a><a class="code" href="structdlib_1_1assign__pixel__helpers_1_1helper_3_01P1_00_01P2_00_01rgb_00_01rgb_01_4.html">00484</a>         <span class="keyword">struct </span>helper&lt;P1,P2,rgb,rgb&gt;
<a name="l00485"></a>00485         {
<a name="l00486"></a>00486             <span class="keyword">static</span> <span class="keywordtype">void</span> assign(P1&amp; dest, <span class="keyword">const</span> P2&amp; src) 
<a name="l00487"></a>00487             { 
<a name="l00488"></a>00488                 dest.red = src.red; 
<a name="l00489"></a>00489                 dest.green = src.green; 
<a name="l00490"></a>00490                 dest.blue = src.blue; 
<a name="l00491"></a>00491             }
<a name="l00492"></a>00492         };
<a name="l00493"></a>00493 
<a name="l00494"></a>00494         <span class="keyword">template</span> &lt; <span class="keyword">typename</span> P1, <span class="keyword">typename</span> P2 &gt;
<a name="l00495"></a><a class="code" href="structdlib_1_1assign__pixel__helpers_1_1helper_3_01P1_00_01P2_00_01rgb__alpha_00_01rgb__alpha_01_4.html">00495</a>         <span class="keyword">struct </span>helper&lt;P1,P2,rgb_alpha,rgb_alpha&gt;
<a name="l00496"></a>00496         {
<a name="l00497"></a>00497             <span class="keyword">static</span> <span class="keywordtype">void</span> assign(P1&amp; dest, <span class="keyword">const</span> P2&amp; src) 
<a name="l00498"></a>00498             { 
<a name="l00499"></a>00499                 dest.red = src.red; 
<a name="l00500"></a>00500                 dest.green = src.green; 
<a name="l00501"></a>00501                 dest.blue = src.blue; 
<a name="l00502"></a>00502                 dest.alpha = src.alpha; 
<a name="l00503"></a>00503             }
<a name="l00504"></a>00504         };
<a name="l00505"></a>00505 
<a name="l00506"></a>00506         <span class="keyword">template</span> &lt; <span class="keyword">typename</span> P1, <span class="keyword">typename</span> P2 &gt;
<a name="l00507"></a><a class="code" href="structdlib_1_1assign__pixel__helpers_1_1helper_3_01P1_00_01P2_00_01hsi_00_01hsi_01_4.html">00507</a>         <span class="keyword">struct </span>helper&lt;P1,P2,hsi,hsi&gt;
<a name="l00508"></a>00508         {
<a name="l00509"></a>00509             <span class="keyword">static</span> <span class="keywordtype">void</span> assign(P1&amp; dest, <span class="keyword">const</span> P2&amp; src) 
<a name="l00510"></a>00510             { 
<a name="l00511"></a>00511                 dest.h = src.h; 
<a name="l00512"></a>00512                 dest.s = src.s; 
<a name="l00513"></a>00513                 dest.i = src.i; 
<a name="l00514"></a>00514             }
<a name="l00515"></a>00515         };
<a name="l00516"></a>00516 
<a name="l00517"></a>00517     <span class="comment">// -----------------------------</span>
<a name="l00518"></a>00518         <span class="comment">// dest is a grayscale</span>
<a name="l00519"></a>00519 
<a name="l00520"></a>00520         <span class="keyword">template</span> &lt; <span class="keyword">typename</span> P1, <span class="keyword">typename</span> P2 &gt;
<a name="l00521"></a><a class="code" href="structdlib_1_1assign__pixel__helpers_1_1helper_3_01P1_00_01P2_00_01grayscale_00_01rgb_01_4.html">00521</a>         <span class="keyword">struct </span>helper&lt;P1,P2,grayscale,rgb&gt;
<a name="l00522"></a>00522         {
<a name="l00523"></a>00523             <span class="keyword">static</span> <span class="keywordtype">void</span> assign(P1&amp; dest, <span class="keyword">const</span> P2&amp; src) 
<a name="l00524"></a>00524             { 
<a name="l00525"></a>00525                 dest = <span class="keyword">static_cast&lt;</span>P1<span class="keyword">&gt;</span>((<span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span><span class="keyword">&gt;</span>(src.red) +
<a name="l00526"></a>00526                         static_cast&lt;unsigned int&gt;(src.green) +  
<a name="l00527"></a>00527                         <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span><span class="keyword">&gt;</span>(src.blue))/3); 
<a name="l00528"></a>00528             }
<a name="l00529"></a>00529         };
<a name="l00530"></a>00530 
<a name="l00531"></a>00531         <span class="keyword">template</span> &lt; <span class="keyword">typename</span> P1, <span class="keyword">typename</span> P2 &gt;
<a name="l00532"></a><a class="code" href="structdlib_1_1assign__pixel__helpers_1_1helper_3_01P1_00_01P2_00_01grayscale_00_01rgb__alpha_01_4.html">00532</a>         <span class="keyword">struct </span>helper&lt;P1,P2,grayscale,rgb_alpha&gt;
<a name="l00533"></a>00533         {
<a name="l00534"></a>00534             <span class="keyword">static</span> <span class="keywordtype">void</span> assign(P1&amp; dest, <span class="keyword">const</span> P2&amp; src) 
<a name="l00535"></a>00535             { 
<a name="l00536"></a>00536 
<a name="l00537"></a>00537                 <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> avg = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span><span class="keyword">&gt;</span>((<span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span><span class="keyword">&gt;</span>(src.red) +
<a name="l00538"></a>00538                                                            static_cast&lt;unsigned int&gt;(src.green) +  
<a name="l00539"></a>00539                                                            <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span><span class="keyword">&gt;</span>(src.blue))/3); 
<a name="l00540"></a>00540 
<a name="l00541"></a>00541                 <span class="keywordflow">if</span> (src.alpha == 255)
<a name="l00542"></a>00542                 {
<a name="l00543"></a>00543                     dest = avg;
<a name="l00544"></a>00544                 }
<a name="l00545"></a>00545                 <span class="keywordflow">else</span>
<a name="l00546"></a>00546                 {
<a name="l00547"></a>00547                     <span class="comment">// perform this assignment using fixed point arithmetic: </span>
<a name="l00548"></a>00548                     <span class="comment">// dest = src*(alpha/255) + src*(1 - alpha/255);</span>
<a name="l00549"></a>00549                     <span class="comment">// dest = src*(alpha/255) + dest*1 - dest*(alpha/255);</span>
<a name="l00550"></a>00550                     <span class="comment">// dest = dest*1 + src*(alpha/255) - dest*(alpha/255);</span>
<a name="l00551"></a>00551                     <span class="comment">// dest = dest*1 + (src - dest)*(alpha/255);</span>
<a name="l00552"></a>00552                     <span class="comment">// dest += (src - dest)*(alpha/255);</span>
<a name="l00553"></a>00553 
<a name="l00554"></a>00554                     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> temp = avg;
<a name="l00555"></a>00555 
<a name="l00556"></a>00556                     temp -= dest;
<a name="l00557"></a>00557 
<a name="l00558"></a>00558                     temp *= src.alpha;
<a name="l00559"></a>00559 
<a name="l00560"></a>00560                     temp &gt;&gt;= 8;
<a name="l00561"></a>00561 
<a name="l00562"></a>00562                     dest += <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span><span class="keyword">&gt;</span>(temp&amp;0xFF);
<a name="l00563"></a>00563                 }
<a name="l00564"></a>00564             }
<a name="l00565"></a>00565         };
<a name="l00566"></a>00566 
<a name="l00567"></a>00567         <span class="keyword">template</span> &lt; <span class="keyword">typename</span> P1, <span class="keyword">typename</span> P2 &gt;
<a name="l00568"></a><a class="code" href="structdlib_1_1assign__pixel__helpers_1_1helper_3_01P1_00_01P2_00_01grayscale_00_01hsi_01_4.html">00568</a>         <span class="keyword">struct </span>helper&lt;P1,P2,grayscale,hsi&gt;
<a name="l00569"></a>00569         {
<a name="l00570"></a>00570             <span class="keyword">static</span> <span class="keywordtype">void</span> assign(P1&amp; dest, <span class="keyword">const</span> P2&amp; src) 
<a name="l00571"></a>00571             { 
<a name="l00572"></a>00572                 dest = <span class="keyword">static_cast&lt;</span>P1<span class="keyword">&gt;</span>(src.i);
<a name="l00573"></a>00573             }
<a name="l00574"></a>00574         };
<a name="l00575"></a>00575 
<a name="l00576"></a>00576 
<a name="l00577"></a>00577     <span class="comment">// -----------------------------</span>
<a name="l00578"></a>00578 
<a name="l00579"></a><a class="code" href="structdlib_1_1assign__pixel__helpers_1_1HSL.html">00579</a>         <span class="keyword">struct </span><a class="code" href="structdlib_1_1assign__pixel__helpers_1_1HSL.html">HSL</a>
<a name="l00580"></a>00580         {
<a name="l00581"></a>00581             <span class="keywordtype">double</span> h;
<a name="l00582"></a>00582             <span class="keywordtype">double</span> s;
<a name="l00583"></a>00583             <span class="keywordtype">double</span> l;
<a name="l00584"></a>00584         };
<a name="l00585"></a>00585 
<a name="l00586"></a><a class="code" href="structdlib_1_1assign__pixel__helpers_1_1COLOUR.html">00586</a>         <span class="keyword">struct </span><a class="code" href="structdlib_1_1assign__pixel__helpers_1_1COLOUR.html">COLOUR</a>
<a name="l00587"></a>00587         {
<a name="l00588"></a>00588             <span class="keywordtype">double</span> r;
<a name="l00589"></a>00589             <span class="keywordtype">double</span> g;
<a name="l00590"></a>00590             <span class="keywordtype">double</span> b;
<a name="l00591"></a>00591         };
<a name="l00592"></a>00592 
<a name="l00593"></a>00593         <span class="comment">/*</span>
<a name="l00594"></a>00594 <span class="comment">            I found this excellent bit of code for dealing with HSL spaces at </span>
<a name="l00595"></a>00595 <span class="comment">            http://local.wasp.uwa.edu.au/~pbourke/colour/hsl/</span>
<a name="l00596"></a>00596 <span class="comment">        */</span>
<a name="l00597"></a>00597         <span class="comment">/*</span>
<a name="l00598"></a>00598 <span class="comment">            Calculate HSL from RGB</span>
<a name="l00599"></a>00599 <span class="comment">            Hue is in degrees</span>
<a name="l00600"></a>00600 <span class="comment">            Lightness is between 0 and 1</span>
<a name="l00601"></a>00601 <span class="comment">            Saturation is between 0 and 1</span>
<a name="l00602"></a>00602 <span class="comment">        */</span>
<a name="l00603"></a>00603         <span class="keyword">inline</span> <a class="code" href="structdlib_1_1assign__pixel__helpers_1_1HSL.html">HSL</a> RGB2HSL(<a class="code" href="structdlib_1_1assign__pixel__helpers_1_1COLOUR.html">COLOUR</a> c1)
<a name="l00604"></a>00604         {
<a name="l00605"></a>00605             <span class="keywordtype">double</span> themin,themax,delta;
<a name="l00606"></a>00606             <a class="code" href="structdlib_1_1assign__pixel__helpers_1_1HSL.html">HSL</a> c2;
<a name="l00607"></a>00607             <span class="keyword">using namespace </span>std;
<a name="l00608"></a>00608 
<a name="l00609"></a>00609             themin = min(c1.r,min(c1.g,c1.b));
<a name="l00610"></a>00610             themax = max(c1.r,max(c1.g,c1.b));
<a name="l00611"></a>00611             delta = themax - themin;
<a name="l00612"></a>00612             c2.l = (themin + themax) / 2;
<a name="l00613"></a>00613             c2.s = 0;
<a name="l00614"></a>00614             <span class="keywordflow">if</span> (c2.l &gt; 0 &amp;&amp; c2.l &lt; 1)
<a name="l00615"></a>00615                 c2.s = delta / (c2.l &lt; 0.5 ? (2*c2.l) : (2-2*c2.l));
<a name="l00616"></a>00616             c2.h = 0;
<a name="l00617"></a>00617             <span class="keywordflow">if</span> (delta &gt; 0) {
<a name="l00618"></a>00618                 <span class="keywordflow">if</span> (themax == c1.r &amp;&amp; themax != c1.g)
<a name="l00619"></a>00619                     c2.h += (c1.g - c1.b) / delta;
<a name="l00620"></a>00620                 <span class="keywordflow">if</span> (themax == c1.g &amp;&amp; themax != c1.b)
<a name="l00621"></a>00621                     c2.h += (2 + (c1.b - c1.r) / delta);
<a name="l00622"></a>00622                 <span class="keywordflow">if</span> (themax == c1.b &amp;&amp; themax != c1.r)
<a name="l00623"></a>00623                     c2.h += (4 + (c1.r - c1.g) / delta);
<a name="l00624"></a>00624                 c2.h *= 60;
<a name="l00625"></a>00625             }
<a name="l00626"></a>00626             <span class="keywordflow">return</span>(c2);
<a name="l00627"></a>00627         }
<a name="l00628"></a>00628 
<a name="l00629"></a>00629         <span class="comment">/*</span>
<a name="l00630"></a>00630 <span class="comment">            Calculate RGB from HSL, reverse of RGB2HSL()</span>
<a name="l00631"></a>00631 <span class="comment">            Hue is in degrees</span>
<a name="l00632"></a>00632 <span class="comment">            Lightness is between 0 and 1</span>
<a name="l00633"></a>00633 <span class="comment">            Saturation is between 0 and 1</span>
<a name="l00634"></a>00634 <span class="comment">        */</span>
<a name="l00635"></a>00635         <span class="keyword">inline</span> COLOUR HSL2RGB(HSL c1)
<a name="l00636"></a>00636         {
<a name="l00637"></a>00637             COLOUR c2,sat,ctmp;
<a name="l00638"></a>00638             <span class="keyword">using namespace </span>std;
<a name="l00639"></a>00639 
<a name="l00640"></a>00640             <span class="keywordflow">if</span> (c1.h &lt; 120) {
<a name="l00641"></a>00641                 sat.r = (120 - c1.h) / 60.0;
<a name="l00642"></a>00642                 sat.g = c1.h / 60.0;
<a name="l00643"></a>00643                 sat.b = 0;
<a name="l00644"></a>00644             } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (c1.h &lt; 240) {
<a name="l00645"></a>00645                 sat.r = 0;
<a name="l00646"></a>00646                 sat.g = (240 - c1.h) / 60.0;
<a name="l00647"></a>00647                 sat.b = (c1.h - 120) / 60.0;
<a name="l00648"></a>00648             } <span class="keywordflow">else</span> {
<a name="l00649"></a>00649                 sat.r = (c1.h - 240) / 60.0;
<a name="l00650"></a>00650                 sat.g = 0;
<a name="l00651"></a>00651                 sat.b = (360 - c1.h) / 60.0;
<a name="l00652"></a>00652             }
<a name="l00653"></a>00653             sat.r = min(sat.r,1.0);
<a name="l00654"></a>00654             sat.g = min(sat.g,1.0);
<a name="l00655"></a>00655             sat.b = min(sat.b,1.0);
<a name="l00656"></a>00656 
<a name="l00657"></a>00657             ctmp.r = 2 * c1.s * sat.r + (1 - c1.s);
<a name="l00658"></a>00658             ctmp.g = 2 * c1.s * sat.g + (1 - c1.s);
<a name="l00659"></a>00659             ctmp.b = 2 * c1.s * sat.b + (1 - c1.s);
<a name="l00660"></a>00660 
<a name="l00661"></a>00661             <span class="keywordflow">if</span> (c1.l &lt; 0.5) {
<a name="l00662"></a>00662                 c2.r = c1.l * ctmp.r;
<a name="l00663"></a>00663                 c2.g = c1.l * ctmp.g;
<a name="l00664"></a>00664                 c2.b = c1.l * ctmp.b;
<a name="l00665"></a>00665             } <span class="keywordflow">else</span> {
<a name="l00666"></a>00666                 c2.r = (1 - c1.l) * ctmp.r + 2 * c1.l - 1;
<a name="l00667"></a>00667                 c2.g = (1 - c1.l) * ctmp.g + 2 * c1.l - 1;
<a name="l00668"></a>00668                 c2.b = (1 - c1.l) * ctmp.b + 2 * c1.l - 1;
<a name="l00669"></a>00669             }
<a name="l00670"></a>00670 
<a name="l00671"></a>00671             <span class="keywordflow">return</span>(c2);
<a name="l00672"></a>00672         }
<a name="l00673"></a>00673 
<a name="l00674"></a>00674 
<a name="l00675"></a>00675     <span class="comment">// -----------------------------</span>
<a name="l00676"></a>00676         <span class="comment">// dest is a color rgb_pixel</span>
<a name="l00677"></a>00677 
<a name="l00678"></a>00678         <span class="keyword">template</span> &lt; <span class="keyword">typename</span> P1 &gt;
<a name="l00679"></a><a class="code" href="structdlib_1_1assign__pixel__helpers_1_1helper_3_01P1_00_01unsigned_01char_00_01rgb_00_01grayscale_01_4.html">00679</a>         <span class="keyword">struct </span>helper&lt;P1,unsigned char,rgb,grayscale&gt;
<a name="l00680"></a>00680         {
<a name="l00681"></a>00681             <span class="keyword">static</span> <span class="keywordtype">void</span> assign(P1&amp; dest, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>&amp; src) 
<a name="l00682"></a>00682             { 
<a name="l00683"></a>00683                 dest.red = src; 
<a name="l00684"></a>00684                 dest.green = src; 
<a name="l00685"></a>00685                 dest.blue = src; 
<a name="l00686"></a>00686             }
<a name="l00687"></a>00687         };
<a name="l00688"></a>00688 
<a name="l00689"></a>00689         <span class="keyword">template</span> &lt; <span class="keyword">typename</span> P1, <span class="keyword">typename</span> P2 &gt;
<a name="l00690"></a><a class="code" href="structdlib_1_1assign__pixel__helpers_1_1helper_3_01P1_00_01P2_00_01rgb_00_01grayscale_01_4.html">00690</a>         <span class="keyword">struct </span>helper&lt;P1,P2,rgb,grayscale&gt;
<a name="l00691"></a>00691         {
<a name="l00692"></a>00692             <span class="keyword">static</span> <span class="keywordtype">void</span> assign(P1&amp; dest, <span class="keyword">const</span> P2&amp; src) 
<a name="l00693"></a>00693             { 
<a name="l00694"></a>00694                 <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> p;
<a name="l00695"></a>00695                 <span class="keywordflow">if</span> (src &lt;= 255)
<a name="l00696"></a>00696                     p = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span><span class="keyword">&gt;</span>(src);
<a name="l00697"></a>00697                 <span class="keywordflow">else</span>
<a name="l00698"></a>00698                     p = 255;
<a name="l00699"></a>00699 
<a name="l00700"></a>00700                 dest.red = p; 
<a name="l00701"></a>00701                 dest.green = p; 
<a name="l00702"></a>00702                 dest.blue = p; 
<a name="l00703"></a>00703             }
<a name="l00704"></a>00704         };
<a name="l00705"></a>00705 
<a name="l00706"></a>00706         <span class="keyword">template</span> &lt; <span class="keyword">typename</span> P1, <span class="keyword">typename</span> P2 &gt;
<a name="l00707"></a><a class="code" href="structdlib_1_1assign__pixel__helpers_1_1helper_3_01P1_00_01P2_00_01rgb_00_01rgb__alpha_01_4.html">00707</a>         <span class="keyword">struct </span>helper&lt;P1,P2,rgb,rgb_alpha&gt;
<a name="l00708"></a>00708         {
<a name="l00709"></a>00709             <span class="keyword">static</span> <span class="keywordtype">void</span> assign(P1&amp; dest, <span class="keyword">const</span> P2&amp; src) 
<a name="l00710"></a>00710             { 
<a name="l00711"></a>00711                 <span class="keywordflow">if</span> (src.alpha == 255)
<a name="l00712"></a>00712                 {
<a name="l00713"></a>00713                     dest.red = src.red;
<a name="l00714"></a>00714                     dest.green = src.green;
<a name="l00715"></a>00715                     dest.blue = src.blue;
<a name="l00716"></a>00716                 }
<a name="l00717"></a>00717                 <span class="keywordflow">else</span>
<a name="l00718"></a>00718                 {
<a name="l00719"></a>00719                     <span class="comment">// perform this assignment using fixed point arithmetic: </span>
<a name="l00720"></a>00720                     <span class="comment">// dest = src*(alpha/255) + src*(1 - alpha/255);</span>
<a name="l00721"></a>00721                     <span class="comment">// dest = src*(alpha/255) + dest*1 - dest*(alpha/255);</span>
<a name="l00722"></a>00722                     <span class="comment">// dest = dest*1 + src*(alpha/255) - dest*(alpha/255);</span>
<a name="l00723"></a>00723                     <span class="comment">// dest = dest*1 + (src - dest)*(alpha/255);</span>
<a name="l00724"></a>00724                     <span class="comment">// dest += (src - dest)*(alpha/255);</span>
<a name="l00725"></a>00725 
<a name="l00726"></a>00726                     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> temp_r = src.red;
<a name="l00727"></a>00727                     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> temp_g = src.green;
<a name="l00728"></a>00728                     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> temp_b = src.blue;
<a name="l00729"></a>00729 
<a name="l00730"></a>00730                     temp_r -= dest.red;
<a name="l00731"></a>00731                     temp_g -= dest.green;
<a name="l00732"></a>00732                     temp_b -= dest.blue;
<a name="l00733"></a>00733 
<a name="l00734"></a>00734                     temp_r *= src.alpha;
<a name="l00735"></a>00735                     temp_g *= src.alpha;
<a name="l00736"></a>00736                     temp_b *= src.alpha;
<a name="l00737"></a>00737 
<a name="l00738"></a>00738                     temp_r &gt;&gt;= 8;
<a name="l00739"></a>00739                     temp_g &gt;&gt;= 8;
<a name="l00740"></a>00740                     temp_b &gt;&gt;= 8;
<a name="l00741"></a>00741 
<a name="l00742"></a>00742                     dest.red += <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span><span class="keyword">&gt;</span>(temp_r&amp;0xFF);
<a name="l00743"></a>00743                     dest.green += <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span><span class="keyword">&gt;</span>(temp_g&amp;0xFF);
<a name="l00744"></a>00744                     dest.blue += <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span><span class="keyword">&gt;</span>(temp_b&amp;0xFF);
<a name="l00745"></a>00745                 }
<a name="l00746"></a>00746             }
<a name="l00747"></a>00747         };
<a name="l00748"></a>00748 
<a name="l00749"></a>00749         <span class="keyword">template</span> &lt; <span class="keyword">typename</span> P1, <span class="keyword">typename</span> P2 &gt;
<a name="l00750"></a><a class="code" href="structdlib_1_1assign__pixel__helpers_1_1helper_3_01P1_00_01P2_00_01rgb_00_01hsi_01_4.html">00750</a>         <span class="keyword">struct </span>helper&lt;P1,P2,rgb,hsi&gt;
<a name="l00751"></a>00751         {
<a name="l00752"></a>00752             <span class="keyword">static</span> <span class="keywordtype">void</span> assign(P1&amp; dest, <span class="keyword">const</span> P2&amp; src) 
<a name="l00753"></a>00753             { 
<a name="l00754"></a>00754                 <a class="code" href="structdlib_1_1assign__pixel__helpers_1_1COLOUR.html">COLOUR</a> c;
<a name="l00755"></a>00755                 <a class="code" href="structdlib_1_1assign__pixel__helpers_1_1HSL.html">HSL</a> h;
<a name="l00756"></a>00756                 h.h = src.h;
<a name="l00757"></a>00757                 h.h = h.h/255.0*360;
<a name="l00758"></a>00758                 h.s = src.s/255.0;
<a name="l00759"></a>00759                 h.l = src.i/255.0;
<a name="l00760"></a>00760                 c = HSL2RGB(h);
<a name="l00761"></a>00761 
<a name="l00762"></a>00762                 dest.red = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span><span class="keyword">&gt;</span>(c.r*255.0);
<a name="l00763"></a>00763                 dest.green = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span><span class="keyword">&gt;</span>(c.g*255.0);
<a name="l00764"></a>00764                 dest.blue = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span><span class="keyword">&gt;</span>(c.b*255.0);
<a name="l00765"></a>00765             }
<a name="l00766"></a>00766         };
<a name="l00767"></a>00767 
<a name="l00768"></a>00768     <span class="comment">// -----------------------------</span>
<a name="l00769"></a>00769         <span class="comment">// dest is a color rgb_alpha_pixel</span>
<a name="l00770"></a>00770 
<a name="l00771"></a>00771         <span class="keyword">template</span> &lt; <span class="keyword">typename</span> P1 &gt;
<a name="l00772"></a><a class="code" href="structdlib_1_1assign__pixel__helpers_1_1helper_3_01P1_00_01unsigned_01char_00_01rgb__alpha_00_01grayscale_01_4.html">00772</a>         <span class="keyword">struct </span>helper&lt;P1,unsigned char,rgb_alpha,grayscale&gt;
<a name="l00773"></a>00773         {
<a name="l00774"></a>00774             <span class="keyword">static</span> <span class="keywordtype">void</span> assign(P1&amp; dest, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>&amp; src) 
<a name="l00775"></a>00775             { 
<a name="l00776"></a>00776                 dest.red = src; 
<a name="l00777"></a>00777                 dest.green = src; 
<a name="l00778"></a>00778                 dest.blue = src; 
<a name="l00779"></a>00779                 dest.alpha = 255;
<a name="l00780"></a>00780             }
<a name="l00781"></a>00781         };
<a name="l00782"></a>00782 
<a name="l00783"></a>00783 
<a name="l00784"></a>00784         <span class="keyword">template</span> &lt; <span class="keyword">typename</span> P1, <span class="keyword">typename</span> P2 &gt;
<a name="l00785"></a><a class="code" href="structdlib_1_1assign__pixel__helpers_1_1helper_3_01P1_00_01P2_00_01rgb__alpha_00_01grayscale_01_4.html">00785</a>         <span class="keyword">struct </span>helper&lt;P1,P2,rgb_alpha,grayscale&gt;
<a name="l00786"></a>00786         {
<a name="l00787"></a>00787             <span class="keyword">static</span> <span class="keywordtype">void</span> assign(P1&amp; dest, <span class="keyword">const</span> P2&amp; src) 
<a name="l00788"></a>00788             { 
<a name="l00789"></a>00789                 <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> p;
<a name="l00790"></a>00790                 <span class="keywordflow">if</span> (src &lt;= 255)
<a name="l00791"></a>00791                     p = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span><span class="keyword">&gt;</span>(src);
<a name="l00792"></a>00792                 <span class="keywordflow">else</span>
<a name="l00793"></a>00793                     p = 255;
<a name="l00794"></a>00794 
<a name="l00795"></a>00795                 dest.red = p; 
<a name="l00796"></a>00796                 dest.green = p; 
<a name="l00797"></a>00797                 dest.blue = p; 
<a name="l00798"></a>00798                 dest.alpha = 255;
<a name="l00799"></a>00799             }
<a name="l00800"></a>00800         };
<a name="l00801"></a>00801 
<a name="l00802"></a>00802         <span class="keyword">template</span> &lt; <span class="keyword">typename</span> P1, <span class="keyword">typename</span> P2 &gt;
<a name="l00803"></a><a class="code" href="structdlib_1_1assign__pixel__helpers_1_1helper_3_01P1_00_01P2_00_01rgb__alpha_00_01rgb_01_4.html">00803</a>         <span class="keyword">struct </span>helper&lt;P1,P2,rgb_alpha,rgb&gt;
<a name="l00804"></a>00804         {
<a name="l00805"></a>00805             <span class="keyword">static</span> <span class="keywordtype">void</span> assign(P1&amp; dest, <span class="keyword">const</span> P2&amp; src) 
<a name="l00806"></a>00806             { 
<a name="l00807"></a>00807                 dest.red = src.red;
<a name="l00808"></a>00808                 dest.green = src.green;
<a name="l00809"></a>00809                 dest.blue = src.blue;
<a name="l00810"></a>00810                 dest.alpha = 255;
<a name="l00811"></a>00811             }
<a name="l00812"></a>00812         };
<a name="l00813"></a>00813 
<a name="l00814"></a>00814         <span class="keyword">template</span> &lt; <span class="keyword">typename</span> P1, <span class="keyword">typename</span> P2 &gt;
<a name="l00815"></a><a class="code" href="structdlib_1_1assign__pixel__helpers_1_1helper_3_01P1_00_01P2_00_01rgb__alpha_00_01hsi_01_4.html">00815</a>         <span class="keyword">struct </span>helper&lt;P1,P2,rgb_alpha,hsi&gt;
<a name="l00816"></a>00816         {
<a name="l00817"></a>00817             <span class="keyword">static</span> <span class="keywordtype">void</span> assign(P1&amp; dest, <span class="keyword">const</span> P2&amp; src) 
<a name="l00818"></a>00818             { 
<a name="l00819"></a>00819                 <a class="code" href="structdlib_1_1assign__pixel__helpers_1_1COLOUR.html">COLOUR</a> c;
<a name="l00820"></a>00820                 <a class="code" href="structdlib_1_1assign__pixel__helpers_1_1HSL.html">HSL</a> h;
<a name="l00821"></a>00821                 h.h = src.h;
<a name="l00822"></a>00822                 h.h = h.h/255.0*360;
<a name="l00823"></a>00823                 h.s = src.s/255.0;
<a name="l00824"></a>00824                 h.l = src.i/255.0;
<a name="l00825"></a>00825                 c = HSL2RGB(h);
<a name="l00826"></a>00826 
<a name="l00827"></a>00827                 dest.red = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span><span class="keyword">&gt;</span>(c.r*255.0);
<a name="l00828"></a>00828                 dest.green = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span><span class="keyword">&gt;</span>(c.g*255.0);
<a name="l00829"></a>00829                 dest.blue = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span><span class="keyword">&gt;</span>(c.b*255.0);
<a name="l00830"></a>00830                 dest.alpha = 255;
<a name="l00831"></a>00831             }
<a name="l00832"></a>00832         };
<a name="l00833"></a>00833 
<a name="l00834"></a>00834     <span class="comment">// -----------------------------</span>
<a name="l00835"></a>00835         <span class="comment">// dest is an hsi pixel</span>
<a name="l00836"></a>00836 
<a name="l00837"></a>00837         <span class="keyword">template</span> &lt; <span class="keyword">typename</span> P1&gt;
<a name="l00838"></a><a class="code" href="structdlib_1_1assign__pixel__helpers_1_1helper_3_01P1_00_01unsigned_01char_00_01hsi_00_01grayscale_01_4.html">00838</a>         <span class="keyword">struct </span>helper&lt;P1,unsigned char,hsi,grayscale&gt;
<a name="l00839"></a>00839         {
<a name="l00840"></a>00840             <span class="keyword">static</span> <span class="keywordtype">void</span> assign(P1&amp; dest, <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>&amp; src) 
<a name="l00841"></a>00841             { 
<a name="l00842"></a>00842                 dest.h = 0;
<a name="l00843"></a>00843                 dest.s = 0;
<a name="l00844"></a>00844                 dest.i = src;
<a name="l00845"></a>00845             }
<a name="l00846"></a>00846         };
<a name="l00847"></a>00847 
<a name="l00848"></a>00848 
<a name="l00849"></a>00849         <span class="keyword">template</span> &lt; <span class="keyword">typename</span> P1, <span class="keyword">typename</span> P2 &gt;
<a name="l00850"></a><a class="code" href="structdlib_1_1assign__pixel__helpers_1_1helper_3_01P1_00_01P2_00_01hsi_00_01grayscale_01_4.html">00850</a>         <span class="keyword">struct </span>helper&lt;P1,P2,hsi,grayscale&gt;
<a name="l00851"></a>00851         {
<a name="l00852"></a>00852             <span class="keyword">static</span> <span class="keywordtype">void</span> assign(P1&amp; dest, <span class="keyword">const</span> P2&amp; src) 
<a name="l00853"></a>00853             { 
<a name="l00854"></a>00854                 dest.h = 0;
<a name="l00855"></a>00855                 dest.s = 0;
<a name="l00856"></a>00856                 <span class="keywordflow">if</span> (src &lt;= 255)
<a name="l00857"></a>00857                     dest.i = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span><span class="keyword">&gt;</span>(src);
<a name="l00858"></a>00858                 <span class="keywordflow">else</span>
<a name="l00859"></a>00859                     dest.i = 255;
<a name="l00860"></a>00860             }
<a name="l00861"></a>00861         };
<a name="l00862"></a>00862 
<a name="l00863"></a>00863         <span class="keyword">template</span> &lt; <span class="keyword">typename</span> P1, <span class="keyword">typename</span> P2 &gt;
<a name="l00864"></a><a class="code" href="structdlib_1_1assign__pixel__helpers_1_1helper_3_01P1_00_01P2_00_01hsi_00_01rgb__alpha_01_4.html">00864</a>         <span class="keyword">struct </span>helper&lt;P1,P2,hsi,rgb_alpha&gt;
<a name="l00865"></a>00865         {
<a name="l00866"></a>00866             <span class="keyword">static</span> <span class="keywordtype">void</span> assign(P1&amp; dest, <span class="keyword">const</span> P2&amp; src) 
<a name="l00867"></a>00867             { 
<a name="l00868"></a>00868                 <a class="code" href="structdlib_1_1rgb__pixel.html">rgb_pixel</a> temp;
<a name="l00869"></a>00869                 <span class="comment">// convert target hsi pixel to rgb</span>
<a name="l00870"></a>00870                 helper&lt;rgb_pixel,P1&gt;::assign(temp,dest);
<a name="l00871"></a>00871 
<a name="l00872"></a>00872                 <span class="comment">// now assign the rgb_alpha value to our temp rgb pixel</span>
<a name="l00873"></a>00873                 helper&lt;rgb_pixel,P2&gt;::assign(temp,src);
<a name="l00874"></a>00874 
<a name="l00875"></a>00875                 <span class="comment">// now we can just go assign the new rgb value to the</span>
<a name="l00876"></a>00876                 <span class="comment">// hsi pixel</span>
<a name="l00877"></a>00877                 helper&lt;P1,rgb_pixel&gt;::assign(dest,temp);
<a name="l00878"></a>00878             }
<a name="l00879"></a>00879         };
<a name="l00880"></a>00880 
<a name="l00881"></a>00881         <span class="keyword">template</span> &lt; <span class="keyword">typename</span> P1, <span class="keyword">typename</span> P2 &gt;
<a name="l00882"></a><a class="code" href="structdlib_1_1assign__pixel__helpers_1_1helper_3_01P1_00_01P2_00_01hsi_00_01rgb_01_4.html">00882</a>         <span class="keyword">struct </span>helper&lt;P1,P2,hsi,rgb&gt;
<a name="l00883"></a>00883         {
<a name="l00884"></a>00884             <span class="keyword">static</span> <span class="keywordtype">void</span> assign(P1&amp; dest, <span class="keyword">const</span> P2&amp; src) 
<a name="l00885"></a>00885             { 
<a name="l00886"></a>00886                 <a class="code" href="structdlib_1_1assign__pixel__helpers_1_1COLOUR.html">COLOUR</a> c1;
<a name="l00887"></a>00887                 <a class="code" href="structdlib_1_1assign__pixel__helpers_1_1HSL.html">HSL</a> c2;
<a name="l00888"></a>00888                 c1.r = src.red/255.0;
<a name="l00889"></a>00889                 c1.g = src.green/255.0;
<a name="l00890"></a>00890                 c1.b = src.blue/255.0;
<a name="l00891"></a>00891                 c2 = RGB2HSL(c1);
<a name="l00892"></a>00892                 
<a name="l00893"></a>00893                 dest.h = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span><span class="keyword">&gt;</span>(c2.h/360.0*255.0);
<a name="l00894"></a>00894                 dest.s = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span><span class="keyword">&gt;</span>(c2.s*255.0);
<a name="l00895"></a>00895                 dest.i = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">char</span><span class="keyword">&gt;</span>(c2.l*255.0);
<a name="l00896"></a>00896             }
<a name="l00897"></a>00897         };
<a name="l00898"></a>00898     }
<a name="l00899"></a>00899 
<a name="l00900"></a>00900     <span class="comment">// -----------------------------</span>
<a name="l00901"></a>00901 
<a name="l00902"></a>00902     <span class="keyword">template</span> &lt; <span class="keyword">typename</span> P1, <span class="keyword">typename</span> P2 &gt;
<a name="l00903"></a>00903     <span class="keyword">inline</span> <span class="keywordtype">void</span> assign_pixel (
<a name="l00904"></a>00904         P1&amp; dest,
<a name="l00905"></a>00905         <span class="keyword">const</span> P2&amp; src
<a name="l00906"></a>00906     ) { assign_pixel_helpers::helper&lt;P1,P2&gt;::assign(dest,src); }
<a name="l00907"></a>00907 
<a name="l00908"></a>00908     <span class="keyword">template</span> &lt; <span class="keyword">typename</span> P1&gt;
<a name="l00909"></a>00909     <span class="keyword">inline</span> <span class="keywordtype">void</span> assign_pixel (
<a name="l00910"></a>00910         P1&amp; dest,
<a name="l00911"></a>00911         <span class="keyword">const</span> <span class="keywordtype">int</span> src
<a name="l00912"></a>00912     ) 
<a name="l00913"></a>00913     { 
<a name="l00914"></a>00914         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> p;
<a name="l00915"></a>00915         <span class="keywordflow">if</span> (src &gt;= 0)
<a name="l00916"></a>00916             p = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">long</span><span class="keyword">&gt;</span>(src);
<a name="l00917"></a>00917         <span class="keywordflow">else</span>
<a name="l00918"></a>00918             p = 0;
<a name="l00919"></a>00919 
<a name="l00920"></a>00920         assign_pixel(dest, p);
<a name="l00921"></a>00921     }
<a name="l00922"></a>00922 
<a name="l00923"></a>00923     <span class="keyword">template</span> &lt; <span class="keyword">typename</span> P1&gt;
<a name="l00924"></a>00924     <span class="keyword">inline</span> <span class="keywordtype">void</span> assign_pixel (
<a name="l00925"></a>00925         P1&amp; dest,
<a name="l00926"></a>00926         <span class="keyword">const</span> <span class="keywordtype">long</span> src
<a name="l00927"></a>00927     ) 
<a name="l00928"></a>00928     { 
<a name="l00929"></a>00929         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> p;
<a name="l00930"></a>00930         <span class="keywordflow">if</span> (src &gt;= 0)
<a name="l00931"></a>00931             p = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">long</span><span class="keyword">&gt;</span>(src);
<a name="l00932"></a>00932         <span class="keywordflow">else</span>
<a name="l00933"></a>00933             p = 0;
<a name="l00934"></a>00934 
<a name="l00935"></a>00935         assign_pixel(dest, p);
<a name="l00936"></a>00936     }
<a name="l00937"></a>00937 
<a name="l00938"></a>00938 <span class="comment">// ----------------------------------------------------------------------------------------</span>
<a name="l00939"></a>00939 
<a name="l00940"></a>00940     <span class="keyword">template</span> &lt;
<a name="l00941"></a>00941         <span class="keyword">typename</span> P
<a name="l00942"></a>00942         &gt;
<a name="l00943"></a>00943     <span class="keyword">inline</span> <span class="keyword">typename</span> enable_if_c&lt;pixel_traits&lt;P&gt;::grayscale&gt;::type assign_pixel_intensity_helper (
<a name="l00944"></a>00944         P&amp; dest,
<a name="l00945"></a>00945         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>&amp; new_intensity
<a name="l00946"></a>00946     )
<a name="l00947"></a>00947     {
<a name="l00948"></a>00948         assign_pixel(dest, new_intensity);
<a name="l00949"></a>00949     }
<a name="l00950"></a>00950 
<a name="l00951"></a>00951     <span class="keyword">template</span> &lt;
<a name="l00952"></a>00952         <span class="keyword">typename</span> P
<a name="l00953"></a>00953         &gt;
<a name="l00954"></a>00954     <span class="keyword">inline</span> <span class="keyword">typename</span> enable_if_c&lt;pixel_traits&lt;P&gt;::grayscale == <span class="keyword">false</span>&amp;&amp;
<a name="l00955"></a>00955                                 pixel_traits&lt;P&gt;::has_alpha&gt;::type assign_pixel_intensity_helper (
<a name="l00956"></a>00956         P&amp; dest,
<a name="l00957"></a>00957         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>&amp; new_intensity
<a name="l00958"></a>00958     )
<a name="l00959"></a>00959     {
<a name="l00960"></a>00960         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> alpha = dest.alpha;
<a name="l00961"></a>00961         hsi_pixel p;
<a name="l00962"></a>00962         assign_pixel(p,dest);
<a name="l00963"></a>00963         assign_pixel(p.i, new_intensity);
<a name="l00964"></a>00964         assign_pixel(dest,p);
<a name="l00965"></a>00965         dest.alpha = alpha;
<a name="l00966"></a>00966     }
<a name="l00967"></a>00967 
<a name="l00968"></a>00968     <span class="keyword">template</span> &lt;
<a name="l00969"></a>00969         <span class="keyword">typename</span> P
<a name="l00970"></a>00970         &gt;
<a name="l00971"></a>00971     <span class="keyword">inline</span> <span class="keyword">typename</span> enable_if_c&lt;pixel_traits&lt;P&gt;::grayscale == <span class="keyword">false</span>&amp;&amp;
<a name="l00972"></a>00972                                 pixel_traits&lt;P&gt;::has_alpha == <span class="keyword">false</span>&gt;::type assign_pixel_intensity_helper (
<a name="l00973"></a>00973         P&amp; dest,
<a name="l00974"></a>00974         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>&amp; new_intensity
<a name="l00975"></a>00975     )
<a name="l00976"></a>00976     {
<a name="l00977"></a>00977         hsi_pixel p;
<a name="l00978"></a>00978         assign_pixel(p,dest);
<a name="l00979"></a>00979         assign_pixel(p.i, new_intensity);
<a name="l00980"></a>00980         assign_pixel(dest,p);
<a name="l00981"></a>00981     }
<a name="l00982"></a>00982 
<a name="l00983"></a>00983     <span class="keyword">template</span> &lt;
<a name="l00984"></a>00984         <span class="keyword">typename</span> P
<a name="l00985"></a>00985         &gt;
<a name="l00986"></a><a class="code" href="namespacedlib.html#a3b9a3281788e2c68adbe5e81265aaeb2">00986</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacedlib.html#a3b9a3281788e2c68adbe5e81265aaeb2">assign_pixel_intensity</a> (
<a name="l00987"></a>00987         P&amp; dest,
<a name="l00988"></a>00988         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> new_intensity
<a name="l00989"></a>00989     )
<a name="l00990"></a>00990     {
<a name="l00991"></a>00991         assign_pixel_intensity_helper(dest, new_intensity);
<a name="l00992"></a>00992     }
<a name="l00993"></a>00993 
<a name="l00994"></a>00994 <span class="comment">// ----------------------------------------------------------------------------------------</span>
<a name="l00995"></a>00995 
<a name="l00996"></a>00996     <span class="keyword">template</span> &lt;
<a name="l00997"></a>00997         <span class="keyword">typename</span> P
<a name="l00998"></a>00998         &gt;
<a name="l00999"></a>00999     <span class="keyword">inline</span> <span class="keyword">typename</span> enable_if_c&lt;pixel_traits&lt;P&gt;::grayscale,<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>&gt;::type get_pixel_intensity_helper (
<a name="l01000"></a>01000         <span class="keyword">const</span> P&amp; src 
<a name="l01001"></a>01001     )
<a name="l01002"></a>01002     {
<a name="l01003"></a>01003         <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">long</span><span class="keyword">&gt;</span>(src);
<a name="l01004"></a>01004     }
<a name="l01005"></a>01005 
<a name="l01006"></a>01006     <span class="keyword">template</span> &lt;
<a name="l01007"></a>01007         <span class="keyword">typename</span> P
<a name="l01008"></a>01008         &gt;
<a name="l01009"></a>01009     <span class="keyword">inline</span> <span class="keyword">typename</span> enable_if_c&lt;pixel_traits&lt;P&gt;::grayscale == <span class="keyword">false</span>&amp;&amp;
<a name="l01010"></a>01010                                 pixel_traits&lt;P&gt;::has_alpha, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>&gt;::type get_pixel_intensity_helper (
<a name="l01011"></a>01011         <span class="keyword">const</span> P&amp; src
<a name="l01012"></a>01012     )
<a name="l01013"></a>01013     {
<a name="l01014"></a>01014         P temp = src;
<a name="l01015"></a>01015         temp.alpha = 255;
<a name="l01016"></a>01016         hsi_pixel p;
<a name="l01017"></a>01017         assign_pixel(p,temp);
<a name="l01018"></a>01018         <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">long</span><span class="keyword">&gt;</span>(p.i);
<a name="l01019"></a>01019     }
<a name="l01020"></a>01020 
<a name="l01021"></a>01021     <span class="keyword">template</span> &lt;
<a name="l01022"></a>01022         <span class="keyword">typename</span> P
<a name="l01023"></a>01023         &gt;
<a name="l01024"></a>01024     <span class="keyword">inline</span> <span class="keyword">typename</span> enable_if_c&lt;pixel_traits&lt;P&gt;::grayscale == <span class="keyword">false</span>&amp;&amp;
<a name="l01025"></a>01025                                 pixel_traits&lt;P&gt;::has_alpha == <span class="keyword">false</span>, <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>&gt;::type get_pixel_intensity_helper (
<a name="l01026"></a>01026         <span class="keyword">const</span> P&amp; src
<a name="l01027"></a>01027     )
<a name="l01028"></a>01028     {
<a name="l01029"></a>01029         hsi_pixel p;
<a name="l01030"></a>01030         assign_pixel(p,src);
<a name="l01031"></a>01031         <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">long</span><span class="keyword">&gt;</span>(p.i);
<a name="l01032"></a>01032     }
<a name="l01033"></a>01033 
<a name="l01034"></a>01034     <span class="keyword">template</span> &lt;
<a name="l01035"></a>01035         <span class="keyword">typename</span> P
<a name="l01036"></a>01036         &gt;
<a name="l01037"></a><a class="code" href="namespacedlib.html#acadbad5cd1cbaf9f188eb56b518a0f01">01037</a>     <span class="keyword">inline</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> <a class="code" href="namespacedlib.html#acadbad5cd1cbaf9f188eb56b518a0f01">get_pixel_intensity</a> (
<a name="l01038"></a>01038         <span class="keyword">const</span> P&amp; src
<a name="l01039"></a>01039     )
<a name="l01040"></a>01040     {
<a name="l01041"></a>01041         <span class="keywordflow">return</span> get_pixel_intensity_helper(src);
<a name="l01042"></a>01042     }
<a name="l01043"></a>01043 
<a name="l01044"></a>01044 <span class="comment">// ----------------------------------------------------------------------------------------</span>
<a name="l01045"></a>01045 <span class="comment">// ----------------------------------------------------------------------------------------</span>
<a name="l01046"></a>01046 <span class="comment">// ----------------------------------------------------------------------------------------</span>
<a name="l01047"></a>01047 
<a name="l01048"></a><a class="code" href="namespacedlib.html#abbbd5224f9387eef940579cdf3fd4a13">01048</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacedlib.html#ac78b72e65600a0d25ac3224539794fc2">serialize</a> (
<a name="l01049"></a>01049         <span class="keyword">const</span> <a class="code" href="structdlib_1_1rgb__alpha__pixel.html">rgb_alpha_pixel</a>&amp; item, 
<a name="l01050"></a>01050         std::ostream&amp; out 
<a name="l01051"></a>01051     )   
<a name="l01052"></a>01052     {
<a name="l01053"></a>01053         <span class="keywordflow">try</span>
<a name="l01054"></a>01054         {
<a name="l01055"></a>01055             <a class="code" href="namespacedlib.html#ac78b72e65600a0d25ac3224539794fc2">serialize</a>(item.red,out);
<a name="l01056"></a>01056             <a class="code" href="namespacedlib.html#ac78b72e65600a0d25ac3224539794fc2">serialize</a>(item.green,out);
<a name="l01057"></a>01057             <a class="code" href="namespacedlib.html#ac78b72e65600a0d25ac3224539794fc2">serialize</a>(item.blue,out);
<a name="l01058"></a>01058             <a class="code" href="namespacedlib.html#ac78b72e65600a0d25ac3224539794fc2">serialize</a>(item.alpha,out);
<a name="l01059"></a>01059         }
<a name="l01060"></a>01060         <span class="keywordflow">catch</span> (<a class="code" href="classdlib_1_1serialization__error.html">serialization_error</a>&amp; e)
<a name="l01061"></a>01061         {
<a name="l01062"></a>01062             <span class="keywordflow">throw</span> <a class="code" href="classdlib_1_1serialization__error.html">serialization_error</a>(e.info + <span class="stringliteral">&quot;\n   while serializing object of type rgb_alpha_pixel&quot;</span>); 
<a name="l01063"></a>01063         }
<a name="l01064"></a>01064     }
<a name="l01065"></a>01065 
<a name="l01066"></a>01066 <span class="comment">// ----------------------------------------------------------------------------------------</span>
<a name="l01067"></a>01067 
<a name="l01068"></a><a class="code" href="namespacedlib.html#a59df13454703d695429ac5af04c8cb35">01068</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacedlib.html#a5e5ead1e1179ca255a628e46a55d12ce">deserialize</a> (
<a name="l01069"></a>01069         <a class="code" href="structdlib_1_1rgb__alpha__pixel.html">rgb_alpha_pixel</a>&amp; item, 
<a name="l01070"></a>01070         std::istream&amp; in
<a name="l01071"></a>01071     )   
<a name="l01072"></a>01072     {
<a name="l01073"></a>01073         <span class="keywordflow">try</span>
<a name="l01074"></a>01074         {
<a name="l01075"></a>01075             <a class="code" href="namespacedlib.html#a5e5ead1e1179ca255a628e46a55d12ce">deserialize</a>(item.red,in);
<a name="l01076"></a>01076             <a class="code" href="namespacedlib.html#a5e5ead1e1179ca255a628e46a55d12ce">deserialize</a>(item.green,in);
<a name="l01077"></a>01077             <a class="code" href="namespacedlib.html#a5e5ead1e1179ca255a628e46a55d12ce">deserialize</a>(item.blue,in);
<a name="l01078"></a>01078             <a class="code" href="namespacedlib.html#a5e5ead1e1179ca255a628e46a55d12ce">deserialize</a>(item.alpha,in);
<a name="l01079"></a>01079         }
<a name="l01080"></a>01080         <span class="keywordflow">catch</span> (<a class="code" href="classdlib_1_1serialization__error.html">serialization_error</a>&amp; e)
<a name="l01081"></a>01081         {
<a name="l01082"></a>01082             <span class="keywordflow">throw</span> <a class="code" href="classdlib_1_1serialization__error.html">serialization_error</a>(e.info + <span class="stringliteral">&quot;\n   while deserializing object of type rgb_alpha_pixel&quot;</span>); 
<a name="l01083"></a>01083         }
<a name="l01084"></a>01084     }
<a name="l01085"></a>01085 
<a name="l01086"></a>01086 <span class="comment">// ----------------------------------------------------------------------------------------</span>
<a name="l01087"></a>01087 
<a name="l01088"></a><a class="code" href="namespacedlib.html#ac78b72e65600a0d25ac3224539794fc2">01088</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacedlib.html#ac78b72e65600a0d25ac3224539794fc2">serialize</a> (
<a name="l01089"></a>01089         <span class="keyword">const</span> <a class="code" href="structdlib_1_1rgb__pixel.html">rgb_pixel</a>&amp; item, 
<a name="l01090"></a>01090         std::ostream&amp; out 
<a name="l01091"></a>01091     )   
<a name="l01092"></a>01092     {
<a name="l01093"></a>01093         <span class="keywordflow">try</span>
<a name="l01094"></a>01094         {
<a name="l01095"></a>01095             <a class="code" href="namespacedlib.html#ac78b72e65600a0d25ac3224539794fc2">serialize</a>(item.red,out);
<a name="l01096"></a>01096             <a class="code" href="namespacedlib.html#ac78b72e65600a0d25ac3224539794fc2">serialize</a>(item.green,out);
<a name="l01097"></a>01097             <a class="code" href="namespacedlib.html#ac78b72e65600a0d25ac3224539794fc2">serialize</a>(item.blue,out);
<a name="l01098"></a>01098         }
<a name="l01099"></a>01099         <span class="keywordflow">catch</span> (<a class="code" href="classdlib_1_1serialization__error.html">serialization_error</a>&amp; e)
<a name="l01100"></a>01100         {
<a name="l01101"></a>01101             <span class="keywordflow">throw</span> <a class="code" href="classdlib_1_1serialization__error.html">serialization_error</a>(e.info + <span class="stringliteral">&quot;\n   while serializing object of type rgb_pixel&quot;</span>); 
<a name="l01102"></a>01102         }
<a name="l01103"></a>01103     }
<a name="l01104"></a>01104 
<a name="l01105"></a>01105 <span class="comment">// ----------------------------------------------------------------------------------------</span>
<a name="l01106"></a>01106 
<a name="l01107"></a><a class="code" href="namespacedlib.html#a5e5ead1e1179ca255a628e46a55d12ce">01107</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacedlib.html#a5e5ead1e1179ca255a628e46a55d12ce">deserialize</a> (
<a name="l01108"></a>01108         <a class="code" href="structdlib_1_1rgb__pixel.html">rgb_pixel</a>&amp; item, 
<a name="l01109"></a>01109         std::istream&amp; in
<a name="l01110"></a>01110     )   
<a name="l01111"></a>01111     {
<a name="l01112"></a>01112         <span class="keywordflow">try</span>
<a name="l01113"></a>01113         {
<a name="l01114"></a>01114             <a class="code" href="namespacedlib.html#a5e5ead1e1179ca255a628e46a55d12ce">deserialize</a>(item.red,in);
<a name="l01115"></a>01115             <a class="code" href="namespacedlib.html#a5e5ead1e1179ca255a628e46a55d12ce">deserialize</a>(item.green,in);
<a name="l01116"></a>01116             <a class="code" href="namespacedlib.html#a5e5ead1e1179ca255a628e46a55d12ce">deserialize</a>(item.blue,in);
<a name="l01117"></a>01117         }
<a name="l01118"></a>01118         <span class="keywordflow">catch</span> (<a class="code" href="classdlib_1_1serialization__error.html">serialization_error</a>&amp; e)
<a name="l01119"></a>01119         {
<a name="l01120"></a>01120             <span class="keywordflow">throw</span> <a class="code" href="classdlib_1_1serialization__error.html">serialization_error</a>(e.info + <span class="stringliteral">&quot;\n   while deserializing object of type rgb_pixel&quot;</span>); 
<a name="l01121"></a>01121         }
<a name="l01122"></a>01122     }
<a name="l01123"></a>01123 
<a name="l01124"></a>01124 <span class="comment">// ----------------------------------------------------------------------------------------</span>
<a name="l01125"></a>01125 
<a name="l01126"></a><a class="code" href="namespacedlib.html#aefd5ce982b258dc62d2c4a657278a492">01126</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacedlib.html#ac78b72e65600a0d25ac3224539794fc2">serialize</a> (
<a name="l01127"></a>01127         <span class="keyword">const</span> <a class="code" href="structdlib_1_1bgr__pixel.html">bgr_pixel</a>&amp; item, 
<a name="l01128"></a>01128         std::ostream&amp; out 
<a name="l01129"></a>01129     )   
<a name="l01130"></a>01130     {
<a name="l01131"></a>01131         <span class="keywordflow">try</span>
<a name="l01132"></a>01132         {
<a name="l01133"></a>01133             <a class="code" href="namespacedlib.html#ac78b72e65600a0d25ac3224539794fc2">serialize</a>(item.red,out);
<a name="l01134"></a>01134             <a class="code" href="namespacedlib.html#ac78b72e65600a0d25ac3224539794fc2">serialize</a>(item.green,out);
<a name="l01135"></a>01135             <a class="code" href="namespacedlib.html#ac78b72e65600a0d25ac3224539794fc2">serialize</a>(item.blue,out);
<a name="l01136"></a>01136         }
<a name="l01137"></a>01137         <span class="keywordflow">catch</span> (<a class="code" href="classdlib_1_1serialization__error.html">serialization_error</a>&amp; e)
<a name="l01138"></a>01138         {
<a name="l01139"></a>01139             <span class="keywordflow">throw</span> <a class="code" href="classdlib_1_1serialization__error.html">serialization_error</a>(e.info + <span class="stringliteral">&quot;\n   while serializing object of type bgr_pixel&quot;</span>); 
<a name="l01140"></a>01140         }
<a name="l01141"></a>01141     }
<a name="l01142"></a>01142 
<a name="l01143"></a>01143 <span class="comment">// ----------------------------------------------------------------------------------------</span>
<a name="l01144"></a>01144 
<a name="l01145"></a><a class="code" href="namespacedlib.html#a2ffefe1102a7c709e26a23b4f2c7668c">01145</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacedlib.html#a5e5ead1e1179ca255a628e46a55d12ce">deserialize</a> (
<a name="l01146"></a>01146         <a class="code" href="structdlib_1_1bgr__pixel.html">bgr_pixel</a>&amp; item, 
<a name="l01147"></a>01147         std::istream&amp; in
<a name="l01148"></a>01148     )   
<a name="l01149"></a>01149     {
<a name="l01150"></a>01150         <span class="keywordflow">try</span>
<a name="l01151"></a>01151         {
<a name="l01152"></a>01152             <a class="code" href="namespacedlib.html#a5e5ead1e1179ca255a628e46a55d12ce">deserialize</a>(item.red,in);
<a name="l01153"></a>01153             <a class="code" href="namespacedlib.html#a5e5ead1e1179ca255a628e46a55d12ce">deserialize</a>(item.green,in);
<a name="l01154"></a>01154             <a class="code" href="namespacedlib.html#a5e5ead1e1179ca255a628e46a55d12ce">deserialize</a>(item.blue,in);
<a name="l01155"></a>01155         }
<a name="l01156"></a>01156         <span class="keywordflow">catch</span> (<a class="code" href="classdlib_1_1serialization__error.html">serialization_error</a>&amp; e)
<a name="l01157"></a>01157         {
<a name="l01158"></a>01158             <span class="keywordflow">throw</span> <a class="code" href="classdlib_1_1serialization__error.html">serialization_error</a>(e.info + <span class="stringliteral">&quot;\n   while deserializing object of type bgr_pixel&quot;</span>); 
<a name="l01159"></a>01159         }
<a name="l01160"></a>01160     }
<a name="l01161"></a>01161 
<a name="l01162"></a>01162 <span class="comment">// ----------------------------------------------------------------------------------------</span>
<a name="l01163"></a>01163 
<a name="l01164"></a><a class="code" href="namespacedlib.html#add718e65e3023a2abd8eb04200e81b52">01164</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacedlib.html#ac78b72e65600a0d25ac3224539794fc2">serialize</a> (
<a name="l01165"></a>01165         <span class="keyword">const</span> <a class="code" href="structdlib_1_1hsi__pixel.html">hsi_pixel</a>&amp; item, 
<a name="l01166"></a>01166         std::ostream&amp; out 
<a name="l01167"></a>01167     )   
<a name="l01168"></a>01168     {
<a name="l01169"></a>01169         <span class="keywordflow">try</span>
<a name="l01170"></a>01170         {
<a name="l01171"></a>01171             <a class="code" href="namespacedlib.html#ac78b72e65600a0d25ac3224539794fc2">serialize</a>(item.h,out);
<a name="l01172"></a>01172             <a class="code" href="namespacedlib.html#ac78b72e65600a0d25ac3224539794fc2">serialize</a>(item.s,out);
<a name="l01173"></a>01173             <a class="code" href="namespacedlib.html#ac78b72e65600a0d25ac3224539794fc2">serialize</a>(item.i,out);
<a name="l01174"></a>01174         }
<a name="l01175"></a>01175         <span class="keywordflow">catch</span> (<a class="code" href="classdlib_1_1serialization__error.html">serialization_error</a>&amp; e)
<a name="l01176"></a>01176         {
<a name="l01177"></a>01177             <span class="keywordflow">throw</span> <a class="code" href="classdlib_1_1serialization__error.html">serialization_error</a>(e.info + <span class="stringliteral">&quot;\n   while serializing object of type hsi_pixel&quot;</span>); 
<a name="l01178"></a>01178         }
<a name="l01179"></a>01179     }
<a name="l01180"></a>01180 
<a name="l01181"></a>01181 <span class="comment">// ----------------------------------------------------------------------------------------</span>
<a name="l01182"></a>01182 
<a name="l01183"></a><a class="code" href="namespacedlib.html#a5291c6d8fcf1bd624eaa7f908ea137bf">01183</a>     <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="namespacedlib.html#a5e5ead1e1179ca255a628e46a55d12ce">deserialize</a> (
<a name="l01184"></a>01184         <a class="code" href="structdlib_1_1hsi__pixel.html">hsi_pixel</a>&amp; item, 
<a name="l01185"></a>01185         std::istream&amp; in
<a name="l01186"></a>01186     )   
<a name="l01187"></a>01187     {
<a name="l01188"></a>01188         <span class="keywordflow">try</span>
<a name="l01189"></a>01189         {
<a name="l01190"></a>01190             <a class="code" href="namespacedlib.html#a5e5ead1e1179ca255a628e46a55d12ce">deserialize</a>(item.h,in);
<a name="l01191"></a>01191             <a class="code" href="namespacedlib.html#a5e5ead1e1179ca255a628e46a55d12ce">deserialize</a>(item.s,in);
<a name="l01192"></a>01192             <a class="code" href="namespacedlib.html#a5e5ead1e1179ca255a628e46a55d12ce">deserialize</a>(item.i,in);
<a name="l01193"></a>01193         }
<a name="l01194"></a>01194         <span class="keywordflow">catch</span> (<a class="code" href="classdlib_1_1serialization__error.html">serialization_error</a>&amp; e)
<a name="l01195"></a>01195         {
<a name="l01196"></a>01196             <span class="keywordflow">throw</span> <a class="code" href="classdlib_1_1serialization__error.html">serialization_error</a>(e.info + <span class="stringliteral">&quot;\n   while deserializing object of type hsi_pixel&quot;</span>); 
<a name="l01197"></a>01197         }
<a name="l01198"></a>01198     }
<a name="l01199"></a>01199 
<a name="l01200"></a>01200 <span class="comment">// ----------------------------------------------------------------------------------------</span>
<a name="l01201"></a>01201 
<a name="l01202"></a>01202 }
<a name="l01203"></a>01203 
<a name="l01204"></a>01204 <span class="preprocessor">#endif // DLIB_PIXEl_ </span>
<a name="l01205"></a>01205 <span class="preprocessor"></span>
</pre></div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&nbsp;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&nbsp;</span>Enumerations</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on Wed Feb 17 11:58:03 2010 for Procedural Game Plot Generation Prototype by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
